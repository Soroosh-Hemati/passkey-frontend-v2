<!doctype html>
<html lang="fa">
<head>
  <meta charset="utf-8" />
  <title>تست ثبت‌نام RSA Passkey</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    body { font-family: Tahoma, sans-serif; padding:20px; direction:rtl; }
    input, button { font-size:14px; padding:8px; margin:6px 0; }
    .log { background:#f3f3f3; padding:10px; border-radius:6px; white-space:pre-wrap; }
  </style>
</head>
<body>
  <h2>ثبت‌نام کاربر با Passkey (RSA-SHA256)</h2>

  <label>ایمیل:</label><br/>
  <input id="email" placeholder="user@example.com" style="width:300px"/><br/>
  <button id="registerBtn">ثبت‌نام</button>

  <div id="log" class="log">در انتظار عملیات...</div>

  <script src="passkey-sdk.js"></script>
  <script>
    const log = (msg) => {
      document.getElementById("log").textContent = msg;
    };

    document.getElementById("registerBtn").onclick = async () => {
      const email = document.getElementById("email").value.trim();
      if (!email) return alert("ایمیل را وارد کنید");
      try {
        log("در حال ایجاد Passkey...");
        const res = await PasskeySDK.register(email);
        log("✅ ثبت‌نام موفق!\n\nکلید عمومی:\n" + res.publicKeyPem);
      } catch (err) {
        log("❌ خطا: " + err.message);
        console.error(err);
      }
    };
  </script>
</body>
</html>
